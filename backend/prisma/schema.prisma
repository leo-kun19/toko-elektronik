generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model admin {
  admin_id   Int        @id @default(autoincrement())
  username   String     @unique @db.VarChar(100)
  password   String     @db.VarChar(255)
  created_at DateTime?  @default(now()) @db.Timestamp(6)
  categori   categori[]
}

model categori {
  categori_id Int      @id @default(autoincrement())
  name        String   @db.VarChar(100)
  description String?
  admin_id    Int?
  admin       admin?   @relation(fields: [admin_id], references: [admin_id], onUpdate: NoAction)
  produk      produk[]
}

model produk {
  produk_id   Int           @id @default(autoincrement())
  categori_id Int?
  suplier_id  Int?
  name        String        @db.VarChar(150)
  description String?
  image       String?       @db.VarChar(150)
  price       Decimal       @db.Decimal(12, 2)
  stock       Int?          @default(0)
  created_at  DateTime?     @default(now()) @db.Timestamp(6)
  updated_at  DateTime?     @default(now()) @db.Timestamp(6)
  categori    categori?     @relation(fields: [categori_id], references: [categori_id], onUpdate: NoAction)
  suplier     suplier?      @relation(fields: [suplier_id], references: [suplier_id], onUpdate: NoAction)
}


model suplier {
  suplier_id    Int             @id @default(autoincrement())
  nama          String          @db.VarChar(150)
  contact       String?         @db.VarChar(100)
  produk        produk[]
  barang_masuk  barang_masuk[]
  barang_keluar barang_keluar[]
}

model barang_masuk {
  id          Int       @id @default(autoincrement())
  nama        String    @db.VarChar(150)
  kategori    String    @db.VarChar(100)
  supplier    String    @db.VarChar(150)
  deskripsi   String?
  harga       Decimal   @db.Decimal(12, 2)
  qty         Int
  total       Decimal   @db.Decimal(15, 2)
  tanggal     DateTime  @db.Date
  gambar      String?   @db.VarChar(255)
  suplier_id  Int?
  created_at  DateTime  @default(now()) @db.Timestamp(6)
  suplier     suplier?  @relation(fields: [suplier_id], references: [suplier_id], onUpdate: NoAction)
}

model barang_keluar {
  id          Int       @id @default(autoincrement())
  nama        String    @db.VarChar(150)
  kategori    String    @db.VarChar(100)
  supplier    String    @db.VarChar(150)
  deskripsi   String?
  harga       Decimal   @db.Decimal(12, 2)
  qty         Int
  total       Decimal   @db.Decimal(15, 2)
  tanggal     DateTime  @db.Date
  gambar      String?   @db.VarChar(255)
  suplier_id  Int?
  created_at  DateTime  @default(now()) @db.Timestamp(6)
  suplier     suplier?  @relation(fields: [suplier_id], references: [suplier_id], onUpdate: NoAction)
}

